# Техническое задание: Next.js SSR Blog

**Версия:** 1.0  
**Дата:** 28 ноября 2025  
**Проект:** Блог-платформа с Server-Side Rendering и AI-интеграцией

---

## 1. Общее описание проекта

### 1.1 Цель проекта

Разработка современной блог-платформы с использованием Server-Side Rendering (SSR), обеспечивающей высокую производительность, отличную SEO-оптимизацию и интеграцию с AI для генерации компонентов и контента.

### 1.2 Основные задачи

- Создание быстрого, SEO-оптимизированного блога с SSR
- Интеграция AI-инструментов для генерации UI-компонентов
- Поддержка MDX для написания статей с интерактивными элементами
- Обеспечение отличного пользовательского опыта на всех устройствах

### 1.3 Технологический стек

| Категория | Технология | Версия |
|-----------|------------|--------|
| Фреймворк | Next.js | 14.x |
| UI-библиотека | React | 18.x |
| Стилизация | TailwindCSS | 3.x |
| Контент | MDX | 3.x |
| Язык | TypeScript | 5.x |

---

## 2. Функциональные требования

### 2.1 Публичная часть (Frontend)

#### 2.1.1 Главная страница

- Герой-секция с анимированным заголовком и кратким описанием блога
- Список последних статей (6-9 карточек) с пагинацией
- Виджет популярных тегов/категорий
- Секция «Избранные статьи»
- Форма подписки на рассылку

#### 2.1.2 Страница статьи

- Полный контент статьи с поддержкой MDX-компонентов
- Мета-информация: автор, дата публикации, время чтения, теги
- Навигация по заголовкам (Table of Contents)
- Блок «Похожие статьи»
- Система комментариев (интеграция с внешним сервисом или собственная)
- Кнопки шаринга в социальные сети
- Копирование ссылки на статью

#### 2.1.3 Страница категории/тега

- Заголовок и описание категории
- Фильтрованный список статей с пагинацией
- Сортировка: по дате, популярности

#### 2.1.4 Страница поиска

- Полнотекстовый поиск по статьям
- Фильтрация по категориям, тегам, дате
- Подсветка найденных совпадений в результатах

#### 2.1.5 Страница «Об авторе/О блоге»

- Информация об авторе/команде
- Ссылки на социальные сети
- Контактная форма

### 2.2 Административная часть (опционально)

- Аутентификация (NextAuth.js или аналог)
- CRUD для статей с MDX-редактором
- Управление категориями и тегами
- Просмотр статистики (просмотры, комментарии)
- Модерация комментариев

---

## 3. Нефункциональные требования

### 3.1 Производительность

| Метрика | Целевое значение |
|---------|------------------|
| LCP (Largest Contentful Paint) | < 2.5 сек |
| FID (First Input Delay) | < 100 мс |
| CLS (Cumulative Layout Shift) | < 0.1 |
| Time to First Byte (TTFB) | < 600 мс |
| Lighthouse Performance Score | ≥ 90 |

### 3.2 SEO-оптимизация

- Динамическая генерация meta-тегов (title, description, keywords)
- Open Graph и Twitter Card разметка
- Структурированные данные (JSON-LD) для статей
- Автоматическая генерация sitemap.xml
- robots.txt с корректными правилами
- Канонические URL
- Оптимизация изображений с alt-тегами

### 3.3 Адаптивность

- Mobile-first подход
- Брейкпоинты: 320px, 640px, 768px, 1024px, 1280px, 1536px
- Корректное отображение на всех современных браузерах

### 3.4 Доступность (a11y)

- Соответствие WCAG 2.1 уровня AA
- Семантическая HTML-разметка
- Поддержка навигации с клавиатуры
- ARIA-атрибуты где необходимо
- Контрастность текста ≥ 4.5:1

---

## 4. Архитектура приложения

### 4.1 Структура проекта

```
src/
├── app/                          # App Router (Next.js 14)
│   ├── (blog)/                   # Группа маршрутов блога
│   │   ├── page.tsx              # Главная страница
│   │   ├── [slug]/               # Страница статьи
│   │   │   └── page.tsx
│   │   ├── category/
│   │   │   └── [category]/
│   │   │       └── page.tsx
│   │   ├── tag/
│   │   │   └── [tag]/
│   │   │       └── page.tsx
│   │   └── search/
│   │       └── page.tsx
│   ├── about/
│   │   └── page.tsx
│   ├── layout.tsx                # Корневой layout
│   ├── error.tsx                 # Страница ошибки
│   ├── not-found.tsx             # 404 страница
│   └── globals.css
├── components/
│   ├── ui/                       # Базовые UI-компоненты
│   │   ├── Button.tsx
│   │   ├── Card.tsx
│   │   ├── Input.tsx
│   │   └── ...
│   ├── layout/                   # Компоненты разметки
│   │   ├── Header.tsx
│   │   ├── Footer.tsx
│   │   ├── Sidebar.tsx
│   │   └── Navigation.tsx
│   ├── blog/                     # Компоненты блога
│   │   ├── PostCard.tsx
│   │   ├── PostList.tsx
│   │   ├── PostContent.tsx
│   │   ├── TableOfContents.tsx
│   │   └── ShareButtons.tsx
│   └── mdx/                      # MDX-компоненты
│       ├── CodeBlock.tsx
│       ├── Callout.tsx
│       ├── Image.tsx
│       └── index.ts
├── content/                      # MDX-контент
│   └── posts/
│       └── *.mdx
├── lib/                          # Утилиты и хелперы
│   ├── mdx.ts                    # Работа с MDX
│   ├── api.ts                    # API-функции
│   └── utils.ts
├── hooks/                        # Кастомные хуки
│   ├── useSearch.ts
│   └── useTheme.ts
├── types/                        # TypeScript типы
│   └── index.ts
└── config/                       # Конфигурация
    └── site.ts
```

### 4.2 Стратегия рендеринга

| Страница | Стратегия | Обоснование |
|----------|-----------|-------------|
| Главная | SSG + ISR (revalidate: 3600) | Редко меняется, высокий трафик |
| Статья | SSG + ISR (revalidate: 86400) | Контент стабилен после публикации |
| Категория/Тег | SSG + ISR (revalidate: 3600) | Обновляется при новых статьях |
| Поиск | SSR или Client-side | Динамические запросы |
| О блоге | SSG | Статичный контент |

### 4.3 Кэширование

- Next.js Data Cache для fetch-запросов
- Заголовки `Cache-Control` для статических ресурсов
- Кэширование изображений через next/image
- Redis/Upstash для кэширования API-ответов (опционально)

---

## 5. Компоненты и их спецификация

### 5.1 Header

**Описание:** Шапка сайта с навигацией

**Props:**
```typescript
interface HeaderProps {
  transparent?: boolean;      // Прозрачный фон (для hero-секций)
}
```

**Функциональность:**
- Логотип со ссылкой на главную
- Навигационное меню (Главная, Категории, О блоге)
- Поиск (иконка → раскрывающееся поле)
- Переключатель темы (светлая/тёмная)
- Мобильное меню (бургер)

### 5.2 PostCard

**Описание:** Карточка статьи для списков

**Props:**
```typescript
interface PostCardProps {
  post: {
    slug: string;
    title: string;
    excerpt: string;
    coverImage: string;
    publishedAt: string;
    readingTime: number;
    author: Author;
    tags: string[];
  };
  variant?: 'default' | 'featured' | 'compact';
}
```

**Состояния:**
- Default: стандартная карточка
- Featured: увеличенный размер, акцентный стиль
- Compact: минималистичная версия для сайдбара

### 5.3 TableOfContents

**Описание:** Навигация по заголовкам статьи

**Props:**
```typescript
interface TableOfContentsProps {
  headings: Array<{
    id: string;
    text: string;
    level: 2 | 3 | 4;
  }>;
}
```

**Функциональность:**
- Автоматическое определение активного раздела при скролле
- Плавный скролл к разделу при клике
- Sticky-позиционирование на десктопе
- Сворачиваемый список на мобильных

### 5.4 MDX-компоненты

#### CodeBlock
- Подсветка синтаксиса (Prism или Shiki)
- Кнопка копирования кода
- Отображение языка программирования
- Опциональная нумерация строк

#### Callout
```typescript
interface CalloutProps {
  type: 'info' | 'warning' | 'error' | 'success' | 'tip';
  title?: string;
  children: React.ReactNode;
}
```

#### Image (расширенный)
- Lazy loading
- Placeholder blur
- Lightbox при клике
- Подпись к изображению

---

## 6. API и интеграции

### 6.1 Внутренний API (Route Handlers)

```
/api/
├── posts/
│   ├── route.ts              # GET: список статей
│   └── [slug]/
│       └── route.ts          # GET: одна статья
├── search/
│   └── route.ts              # GET: поиск
├── subscribe/
│   └── route.ts              # POST: подписка на рассылку
└── comments/
    └── route.ts              # GET/POST: комментарии
```

### 6.2 Внешние интеграции

| Сервис | Назначение | Приоритет |
|--------|------------|-----------|
| Analytics (Vercel/GA4) | Аналитика посещений | Высокий |
| Giscus/Disqus | Комментарии | Средний |
| Mailchimp/Buttondown | Email-рассылка | Средний |
| Algolia/Meilisearch | Расширенный поиск | Низкий |

---

## 7. AI-интеграция

### 7.1 Генерация компонентов

- Использование AI для создания базовых UI-компонентов по описанию
- Генерация вариаций стилей на основе дизайн-системы
- Автоматическая документация компонентов

### 7.2 SEO-оптимизация с AI

- Генерация meta-описаний для статей
- Предложения по улучшению заголовков
- Автоматическое создание alt-текстов для изображений
- Анализ контента на SEO-соответствие

### 7.3 Контентные возможности

- Генерация превью/excerpt статей
- Предложение связанных статей
- Автоматическое тегирование контента

---

## 8. Дизайн-система

### 8.1 Цветовая палитра

```css
/* Светлая тема */
--background: #ffffff;
--foreground: #0f172a;
--primary: #3b82f6;
--primary-hover: #2563eb;
--secondary: #64748b;
--accent: #f59e0b;
--muted: #f1f5f9;
--border: #e2e8f0;

/* Тёмная тема */
--background: #0f172a;
--foreground: #f8fafc;
--primary: #60a5fa;
--primary-hover: #93c5fd;
--secondary: #94a3b8;
--accent: #fbbf24;
--muted: #1e293b;
--border: #334155;
```

### 8.2 Типографика

| Элемент | Шрифт | Размер (desktop) | Размер (mobile) |
|---------|-------|------------------|-----------------|
| H1 | Inter, sans-serif | 48px / 3rem | 32px / 2rem |
| H2 | Inter, sans-serif | 36px / 2.25rem | 24px / 1.5rem |
| H3 | Inter, sans-serif | 24px / 1.5rem | 20px / 1.25rem |
| Body | Inter, sans-serif | 18px / 1.125rem | 16px / 1rem |
| Code | JetBrains Mono | 14px / 0.875rem | 14px / 0.875rem |

### 8.3 Отступы и сетка

- Базовый unit: 4px
- Контейнер: max-width 1280px, padding 16px (mobile) / 32px (desktop)
- Сетка: 12 колонок с gap 24px

---

## 9. Тестирование

### 9.1 Unit-тесты

- Покрытие утилит и хелперов ≥ 80%
- Тестирование MDX-парсинга
- Инструменты: Jest, React Testing Library

### 9.2 Integration-тесты

- Тестирование API routes
- Проверка SSR/SSG генерации
- Инструменты: Jest, MSW

### 9.3 E2E-тесты

- Основные пользовательские сценарии
- Навигация, поиск, переход по статьям
- Инструменты: Playwright или Cypress

### 9.4 Визуальное тестирование

- Скриншот-тесты ключевых страниц
- Проверка адаптивности
- Инструменты: Chromatic или Percy

---

## 10. Деплой и инфраструктура

### 10.1 Хостинг

**Рекомендуется:** Vercel (оптимально для Next.js)

**Альтернативы:**
- Netlify
- AWS Amplify
- Self-hosted (Docker + Node.js)

### 10.2 CI/CD Pipeline

```
Push to main
    ↓
Lint & Type Check
    ↓
Unit & Integration Tests
    ↓
Build
    ↓
E2E Tests (staging)
    ↓
Deploy to Production
```

### 10.3 Переменные окружения

```env
# Обязательные
NEXT_PUBLIC_SITE_URL=https://example.com
NEXT_PUBLIC_SITE_NAME="My Blog"

# Аналитика
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Интеграции (опционально)
GITHUB_TOKEN=xxx              # Для giscus
MAILCHIMP_API_KEY=xxx
ALGOLIA_APP_ID=xxx
ALGOLIA_API_KEY=xxx
```

---

## 11. Этапы разработки

### Этап 1: Базовая инфраструктура (1-2 недели)

- [ ] Инициализация проекта Next.js 14
- [ ] Настройка TypeScript, ESLint, Prettier
- [ ] Конфигурация TailwindCSS
- [ ] Базовые UI-компоненты (Button, Card, Input)
- [ ] Layout-компоненты (Header, Footer)
- [ ] Настройка тёмной темы

### Этап 2: MDX и контент (1-2 недели)

- [ ] Настройка MDX-обработки
- [ ] MDX-компоненты (CodeBlock, Callout, Image)
- [ ] Система загрузки контента из файлов
- [ ] Frontmatter парсинг

### Этап 3: Страницы блога (2 недели)

- [ ] Главная страница
- [ ] Страница статьи
- [ ] Страницы категорий и тегов
- [ ] 404 и Error страницы

### Этап 4: Функциональность (1-2 недели)

- [ ] Поиск
- [ ] Table of Contents
- [ ] Share-кнопки
- [ ] Подписка на рассылку
- [ ] Комментарии

### Этап 5: SEO и оптимизация (1 неделя)

- [ ] Meta-теги и Open Graph
- [ ] JSON-LD структурированные данные
- [ ] Sitemap и robots.txt
- [ ] Оптимизация изображений
- [ ] Lighthouse аудит и исправления

### Этап 6: Тестирование и деплой (1 неделя)

- [ ] Unit и integration тесты
- [ ] E2E тесты
- [ ] Настройка CI/CD
- [ ] Production деплой

---

## 12. Критерии приёмки

- Все страницы корректно рендерятся на сервере (SSR/SSG)
- Lighthouse Performance Score ≥ 90
- Отсутствие критических ошибок в консоли
- Корректное отображение на устройствах 320px — 1920px
- Работающий поиск по статьям
- Корректная индексация поисковыми системами
- Прохождение всех автоматических тестов

---

## 13. Приложения

### A. Полезные ресурсы

- [Next.js 14 Documentation](https://nextjs.org/docs)
- [TailwindCSS Documentation](https://tailwindcss.com/docs)
- [MDX Documentation](https://mdxjs.com/)
- [Vercel Deployment](https://vercel.com/docs)

### B. Референсы дизайна

- [Tailwind Blog](https://tailwindcss.com/blog)
- [Lee Robinson's Blog](https://leerob.io/)
- [Josh Comeau's Blog](https://joshwcomeau.com/)

---

*Документ подготовлен для команды фронтенд-разработки. При возникновении вопросов обращайтесь к техническому лиду проекта.*
